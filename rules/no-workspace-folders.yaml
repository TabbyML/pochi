id: no-workspace-folders
language: tsx
rule:
  any:
    - pattern: $$$.workspaceFolders
    - pattern: $$$.asRelativePath
message: "Do not access workspace.workspaceFolders directly. Use the workspace helpers instead."
severity: error
ignores:
  - "**/__test__/**"
  - "packages/vscode/src/extension.ts"
  - "packages/vscode/src/integrations/command.ts"
  - "packages/vscode/src/integrations/uri-handler.ts"
  - "packages/vscode/src/lib/workspace-job.ts"
  - "packages/vscode/src/nes/contexts.ts"
  - "packages/vscode/src/integrations/git/worktree.ts"
  - "packages/vscode/src/integrations/webview/vscode-host-impl.ts"
files:
  - "packages/vscode/src/**/*.ts"