set -e

check_git_clean() {
    git diff --exit-code
    git diff --staged --exit-code
}

main() {
    bun dep-check
    bun gen:config-schema
    bun check:ast-grep

    bun turbo boundaries
    bun fix
    check_git_clean
    bun tsc
    bun install --frozen-lockfile
    bun run test
}

main
